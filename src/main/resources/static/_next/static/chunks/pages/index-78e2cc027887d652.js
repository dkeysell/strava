(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return __webpack_require__(3843)}])},3843:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return pages}});var jsx_runtime=__webpack_require__(5893),react=__webpack_require__(7294),banner_module=__webpack_require__(6757),helpers_navValues={home:"Home",segment:"Segment"};let subtitleStyle={fontStyle:"italic",fontSize:"XXX-large",color:"coral"},Banner=param=>{let{children}=param,{navigate}=(0,react.useContext)(navigationContext);return(0,jsx_runtime.jsxs)("header",{className:"row mb-4",children:[(0,jsx_runtime.jsx)("div",{className:"col-5",children:(0,jsx_runtime.jsx)("img",{src:"./pngegg-2.png",alt:"logo",className:banner_module.logo,onClick:()=>navigate(helpers_navValues.home)})}),(0,jsx_runtime.jsx)("div",{className:"col-7 mt-5v",style:subtitleStyle,children:children})]})},Segment=()=>{let{param:segment}=(0,react.useContext)(navigationContext);return(0,jsx_runtime.jsxs)("div",{className:"row",children:[(0,jsx_runtime.jsx)("div",{className:"col-4",children:(0,jsx_runtime.jsx)("div",{className:"row",children:(0,jsx_runtime.jsx)("img",{className:"img-fluid",src:segment.elevation_profile,alt:"Segment profile"})})}),(0,jsx_runtime.jsx)("div",{className:"col-6",children:(0,jsx_runtime.jsxs)("div",{className:"row mt-2",children:[(0,jsx_runtime.jsx)("h5",{className:"col-12",children:segment.name}),(0,jsx_runtime.jsxs)("p",{children:["KoM Power: ",segment.komWatts]}),(0,jsx_runtime.jsxs)("p",{children:["QoM Power: ",segment.qomWatts]}),(0,jsx_runtime.jsxs)("p",{children:["Distance: ",segment.distance,"m"]}),(0,jsx_runtime.jsxs)("p",{children:["Average Grade: ",segment.average_grade,"%"]})]})})]})},SegmentRow=param=>{let{segment}=param,{navigate}=(0,react.useContext)(navigationContext);return(0,jsx_runtime.jsxs)("tr",{onClick:()=>navigate(helpers_navValues.segment,segment),children:[(0,jsx_runtime.jsx)("td",{children:segment.name}),(0,jsx_runtime.jsx)("td",{children:segment.qomWatts}),(0,jsx_runtime.jsx)("td",{children:segment.komWatts}),(0,jsx_runtime.jsx)("td",{children:segment.distance}),(0,jsx_runtime.jsx)("td",{children:segment.average_grade}),(0,jsx_runtime.jsx)("td",{children:segment.maximum_grade}),(0,jsx_runtime.jsx)("td",{children:segment.elevation_low}),(0,jsx_runtime.jsx)("td",{children:segment.elevation_high}),(0,jsx_runtime.jsx)("td",{children:segment.qom}),(0,jsx_runtime.jsx)("td",{children:segment.kom}),(0,jsx_runtime.jsx)("td",{children:segment.athlete_count}),(0,jsx_runtime.jsx)("td",{children:segment.effort_count}),(0,jsx_runtime.jsx)("td",{children:segment.climb_category}),(0,jsx_runtime.jsx)("td",{children:segment.city}),(0,jsx_runtime.jsx)("td",{children:segment.state}),(0,jsx_runtime.jsx)("td",{children:segment.country})]})},SegmentTable=param=>{let{segments}=param;return 0===segments.length?(0,jsx_runtime.jsx)("div",{}):(0,jsx_runtime.jsxs)("table",{className:"table table-hover",children:[(0,jsx_runtime.jsx)("thead",{children:(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)("th",{onClick:()=>console.log("name clicked"),children:"Name"}),(0,jsx_runtime.jsx)("th",{children:"QoM Watts"}),(0,jsx_runtime.jsx)("th",{children:"KoM Watts"}),(0,jsx_runtime.jsx)("th",{children:"Distance"}),(0,jsx_runtime.jsx)("th",{children:"Av Grade"}),(0,jsx_runtime.jsx)("th",{children:"Max Grade"}),(0,jsx_runtime.jsx)("th",{children:"Elevation Low"}),(0,jsx_runtime.jsx)("th",{children:"Elevation High"}),(0,jsx_runtime.jsx)("th",{children:"QoM"}),(0,jsx_runtime.jsx)("th",{children:"KoM"}),(0,jsx_runtime.jsx)("th",{children:"Athlete Count"}),(0,jsx_runtime.jsx)("th",{children:"Effort Count"}),(0,jsx_runtime.jsx)("th",{children:"Climb Cat"}),(0,jsx_runtime.jsx)("th",{children:"City"}),(0,jsx_runtime.jsx)("th",{children:"State"}),(0,jsx_runtime.jsx)("th",{children:"Country"})]})}),(0,jsx_runtime.jsx)("tbody",{children:segments.map(s=>(0,jsx_runtime.jsx)(SegmentRow,{segment:s},s.id))})]})};var esm=__webpack_require__(7054);let SegmentMap=param=>{let{coordinates,setCoordinates}=param,[markerPos,setMarkerPos]=(0,react.useState)({lat:51.4,lng:-.12}),mapRef=(0,react.useRef)(),center=(0,react.useMemo)(()=>({lat:51.4,lng:-.12}),[]),onClick=ev=>{setMarkerPos({lat:ev.latLng.lat(),lng:ev.latLng.lng()});let lat=ev.latLng.lat(),lng=ev.latLng.lng();console.log("1: "+lat+" - "+lng),updateCoordinates(lat,lng)},updateCoordinates=(lat,lng)=>{console.log("2: "+lat+" - "+lng),setCoordinates({...coordinates,swLat:lat.toFixed(2),swLong:lng.toFixed(2)})},options=(0,react.useMemo)(()=>({disableDefaultUI:!0,clickableIcons:!1}),[]),onLoad=(0,react.useCallback)(map=>mapRef.current=map,[]);return(0,jsx_runtime.jsx)(esm.b6,{zoom:10,center:center,mapContainerClassName:"map-container",options:options,onLoad:onLoad,onClick:onClick,children:(0,jsx_runtime.jsx)(esm.jC,{position:markerPos})})},SegmentList=param=>{let{segments,setSegments,coordinates,setCoordinates}=param,submit=e=>{e.preventDefault(),querySegments(coordinates)},querySegments=coordinates=>{let swLat=coordinates.swLat,swLong=coordinates.swLong,size=coordinates.size;fetch("http://localhost:8080/api/v1/grid/discover?swLat="+swLat+"&swLong="+swLong+"&size="+size).then(response=>response.json()).then(data=>{setSegments(data)})},{isLoaded}=(0,esm.Db)({googleMapsApiKey:"AIzaSyBkdBr9ZWvUuh2XD5EKVtnc1cvQODGo35A"});return isLoaded?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SegmentMap,{coordinates:coordinates,setCoordinates:setCoordinates}),(0,jsx_runtime.jsxs)("form",{onSubmit:submit,children:[(0,jsx_runtime.jsx)("input",{type:"text",value:coordinates.swLat,onChange:e=>setCoordinates({...coordinates,swLat:e.target.value})}),(0,jsx_runtime.jsx)("input",{type:"text",value:coordinates.swLong,onChange:e=>setCoordinates({...coordinates,swLong:e.target.value})}),(0,jsx_runtime.jsx)("input",{type:"text",value:coordinates.size,onChange:e=>setCoordinates({...coordinates,size:e.target.value})}),(0,jsx_runtime.jsx)("button",{className:"btn btn-primary",children:"Query segments"})]}),(0,jsx_runtime.jsx)(SegmentTable,{segments:segments})]}):(0,jsx_runtime.jsx)("div",{children:"Loading..."})},ComponentPicker=param=>{let{currentNavLocation,segments,setSegments,coordinates,setCoordinates}=param;switch(currentNavLocation){case helpers_navValues.home:return(0,jsx_runtime.jsx)(SegmentList,{segments:segments,setSegments:setSegments,coordinates:coordinates,setCoordinates:setCoordinates});case helpers_navValues.segment:return(0,jsx_runtime.jsx)(Segment,{});default:return(0,jsx_runtime.jsxs)("h3",{children:["No component for navigation value ",currentNavLocation," found"]})}},navigationContext=react.createContext(helpers_navValues.home),App=()=>{let navigate=(0,react.useCallback)((navTo,param)=>setNav({current:navTo,param,navigate}),[]),[segments,setSegments]=(0,react.useState)([]),[coordinates,setCoordinates]=(0,react.useState)({swLat:51.45,swLong:-.26,size:2}),[nav,setNav]=(0,react.useState)({current:helpers_navValues.home,navigate});return(0,jsx_runtime.jsxs)(navigationContext.Provider,{value:nav,children:[(0,jsx_runtime.jsx)(Banner,{children:(0,jsx_runtime.jsx)("div",{children:"Segment Finder"})}),(0,jsx_runtime.jsx)(ComponentPicker,{currentNavLocation:nav.current,segments:segments,setSegments:setSegments,coordinates:coordinates,setCoordinates:setCoordinates})]})},Index=()=>(0,jsx_runtime.jsx)(App,{});var pages=Index},6757:function(module){module.exports={logo:"banner_logo__J1YNy",subtitleStyle:"banner_subtitleStyle__Fm2jx"}}},function(__webpack_require__){__webpack_require__.O(0,[774,255,888,179],function(){return __webpack_require__(__webpack_require__.s=5557)}),_N_E=__webpack_require__.O()}]);